Estudo de casa






CREATE TABLE CLIENTES (
  id    NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  nome  VARCHAR2(100) NOT NULL,
  email VARCHAR2(120) UNIQUE
);


INSERT INTO clientes(nome, email) VALUES ('Pedro Henrique', 'Pedrohenrique@gmail.com');

INSERT INTO clientes(nome, email) VALUES ('Ashleu Goncalves', 'Ashleygoncalves@gmail.com');

INSERT INTO clientes(nome, email) VALUES ('Felipe Aloia', 'Felipealoia@gmail.com');





CREATE TABLE PRODUTOS (
  id     NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  nome   VARCHAR2(100) NOT NULL,
  preco  NUMBER(10,2)  NOT NULL CHECK (preco >= 0),
  tipo   VARCHAR2(50) NOT NULL
);

-- Inserindo alguns produtos
INSERT INTO PRODUTOS (nome, preco, tipo) VALUES ('Notebook X', 3000, 'Notebook'),  
                                                ('Notebook Y', 3500, 'Notebook'),
                                                ('Celular Z', 2000, 'Celular');




UPDATE PRODUTOS SET preco = (preco + (preco / 100) * 10) WHERE nome = 'Notebook X';

UPDATE PRODUTOS SET preco = (preco + (preco / 100) * 10) WHERE nome = 'Notebook Y';

SELECT * FROM PRODUTOS;




CREATE TABLE PEDIDOS (
  id         NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  cliente_id NUMBER NOT NULL,
  produto_id NUMBER NOT NULL,
  status     VARCHAR2(20) NOT NULL CHECK (status IN ('ABERTO','FINALIZADO','CANCELADO'))
);


INSERT INTO PEDIDOS (cliente_id, produto_id, status)
            VALUES (1, 1, 'ABERTO'),
                   (2, 2, 'CANCELADO'),
                   (3, 3, 'FINALIZADO'),
                   (1, 2, 'CANCELADO');



DELETE FROM pedidos WHERE status = 'CANCELADO';




MERGE INTO produtos p
USING (
    SELECT id, preco
    FROM produtos
    WHERE preco = 2000
) prod
ON (p.id = prod.id)
WHEN MATCHED THEN
UPDATE SET p.preco = prod.preco * 1.2;