ESTUDO DE CASO: FÁBRICA DE CONCRETO – “CONCRETO +”
[imagem](./Captura%20de%20tela%202025-09-14%20155847.png)

Codigo - 


 TABELAS PRINCIPAIS - MODELO NORMALIZADO

CREATE TABLE Fornecedor (
    id_fornecedor NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    nome VARCHAR2(100) NOT NULL UNIQUE,
    contato VARCHAR2(100),
    telefone VARCHAR2(20)
);

CREATE TABLE MateriaPrima (
    id_materia NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    nome VARCHAR2(100) NOT NULL UNIQUE,
    unidade VARCHAR2(20) CHECK (unidade IN ('kg','ton','litro'))
);

CREATE TABLE FornecedorMateria (
    id_fornecedor NUMBER NOT NULL REFERENCES Fornecedor(id_fornecedor),
    id_materia NUMBER NOT NULL REFERENCES MateriaPrima(id_materia),
    preco_unitario NUMBER(10,2) NOT NULL CHECK (preco_unitario > 0),
    PRIMARY KEY (id_fornecedor, id_materia)
);

CREATE TABLE Receita (
    id_receita NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    nome_tipo VARCHAR2(50) NOT NULL UNIQUE,
    descricao VARCHAR2(200)
);

CREATE TABLE ReceitaMateria (
    id_receita NUMBER NOT NULL REFERENCES Receita(id_receita),
    id_materia NUMBER NOT NULL REFERENCES MateriaPrima(id_materia),
    quantidade NUMBER(10,2) NOT NULL CHECK (quantidade > 0),
    PRIMARY KEY (id_receita, id_materia)
);

CREATE TABLE Cliente (
    id_cliente NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    nome VARCHAR2(100) NOT NULL UNIQUE,
    cnpj VARCHAR2(20) UNIQUE,
    endereco VARCHAR2(200)
);

CREATE TABLE Funcionario (
    id_func NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    nome VARCHAR2(100) NOT NULL,
    cargo VARCHAR2(50)
);

CREATE TABLE Veiculo (
    id_veiculo NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    placa VARCHAR2(20) NOT NULL UNIQUE,
    capacidade NUMBER(10,2) CHECK (capacidade > 0)
);

CREATE TABLE Lote (
    id_lote NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    data_producao DATE NOT NULL,
    quantidade NUMBER(10,2) NOT NULL CHECK (quantidade > 0),
    status VARCHAR2(20) CHECK (status IN ('produzido','entregue','cancelado')),
    valor_total NUMBER(12,2) CHECK (valor_total >= 0),
    id_receita NUMBER NOT NULL REFERENCES Receita(id_receita),
    id_cliente NUMBER NOT NULL REFERENCES Cliente(id_cliente),
    id_veiculo NUMBER REFERENCES Veiculo(id_veiculo)
);

CREATE TABLE LoteFuncionario (
    id_lote NUMBER NOT NULL REFERENCES Lote(id_lote),
    id_func NUMBER NOT NULL REFERENCES Funcionario(id_func),
    PRIMARY KEY (id_lote, id_func)
);


 TABELA DESNORMALIZADA (BÔNUS PARA BI)

CREATE TABLE RelatorioMensal (
    id_relatorio NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    data_producao DATE NOT NULL,
    cliente_nome VARCHAR2(100) NOT NULL,
    tipo_concreto VARCHAR2(50) NOT NULL,
    quantidade NUMBER(10,2) NOT NULL,
    valor_total NUMBER(12,2) NOT NULL,
    status VARCHAR2(20) NOT NULL
);
